# 作业要求

从原始训练集中分别抽取0.1%、1%、10%的样本构成3个新的训练集，每个类别样本数量相同。可根据需要选择是否从新的训练集中抽取一定比例样本作为验证集。基于每个训练集，训练模型，记录训练集和验证集的准确率，以图表等方式进行呈现。进一步，在完整的测试集上进行性能评测，结果以图表等方式进行呈现。对实验结果进行一定的描述与分析。

# 参考答案

## 第一部分

为了实现这个实验，我们需要对原始的MNIST训练集进行采样，创建不同大小的训练集，并且记录训练集和验证集的准确率。以下是实验的步骤：

1. **采样**：从原始训练集中按照给定的比例抽取样本，确保每个数字类别的样本数量相同。
2. **创建数据加载器**：为每个采样后的训练集创建数据加载器，如果需要，也从其中抽取一部分作为验证集。
3. **训练模型**：使用每个采样后的训练集训练模型，并在每个周期结束时评估模型在验证集上的性能。
4. **记录准确率**：记录每个训练集和验证集的准确率。
5. **呈现结果**：使用图表等方式呈现训练集和验证集的准确率。

`xxx.py` 是实现上述步骤的示例代码：

这段代码首先定义了一个采样函数，用于从原始数据集中按照指定比例抽取样本。然后，它定义了一个train_and_evaluate函数，用于训练和评估模型。对于每个采样比例，它创建了一个新的训练集，并根据需要创建了验证集。然后，它训练模型并记录训练和验证损失以及准确率。

最后，它使用Matplotlib绘制了每个采样比例下的训练损失图表。请注意，为了简化代码，这里只绘制了损失图表，你可以根据需要绘制准确率图表。

在运行上述代码之前，请确保你的环境中安装了matplotlib库，否则需要先安装它。此外，由于实验需要多次训练模型，这可能需要一些时间来完成。

## 第二部分

为了完成实验，我们需要对每个采样后的训练集训练的模型在完整的测试集上进行性能评估。以下是完成这个实验的步骤：

1. **训练模型**：使用每个采样后的训练集训练模型。
2. **性能评估**：在完整的测试集上评估每个模型的性能。
3. **记录准确率**：记录每个模型在测试集上的准确率。
4. **呈现结果**：使用图表等方式呈现测试集上的准确率。
5. **结果分析**：对不同采样比例下的模型性能进行描述和分析。

`xxx.py` 是实现上述步骤的示例代码：

这段代码首先为每个采样比例创建了一个采样的训练集，然后训练了一个MLP模型。接着，它在完整的测试集上评估了每个模型的性能，并记录了准确率。

最后，它使用Matplotlib绘制了一个折线图，展示了不同采样比例下模型在测试集上的准确率。

# 结果分析

在分析实验结果时，考虑以下几点：

- **采样大小与准确率**：观察不同采样比例下模型准确率的变化。通常情况下，更大的训练集可能会带来更好的性能，但也可能导致过拟合。
- **过拟合与欠拟合**：如果较小的训练集准确率下降很快，可能是欠拟合；如果较大的训练集准确率没有显著提高，可能是过拟合。
- **数据多样性**：确保采样过程中保持数据多样性，即每个类别的样本数量相同，以避免模型对某些类别过拟合。
- **计算资源**：更大的训练集需要更多的计算资源。在实际应用中，需要在模型性能和计算资源之间找到平衡。
- **验证集的作用**：如果创建了验证集，它可以帮助我们监控训练过程中的过拟合和欠拟合问题，并调整超参数。

请注意，实验结果可能会因为随机初始化和随机采样的噪声而有所变化。为了获得更稳健的结果，可以多次重复实验并计算准确率的平均值。